<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Booking Summary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database-compat.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #fff;
      margin: 0;
      padding: 40px;
      display: flex;
      justify-content: center;
    }.container {
  max-width: 600px;
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
}

h1, h2 {
  text-align: center;
  margin-bottom: 20px;
}

label {
  display: block;
  margin-top: 15px;
  margin-bottom: 5px;
  font-weight: bold;
}

input[type="text"],
input[type="date"],
select {
  width: 100%;
  padding: 8px;
  margin-bottom: 15px;
  box-sizing: border-box;
}

button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

.submit-btn {
  background-color: #4CAF50;
  color: white;
  border: none;
  margin-top: 30px;
  margin-bottom: 10px;
  display: block;
  width: 100%;
  border-radius: 4px;
}

p {
  margin-bottom: 10px;
}

@media screen and (max-width: 480px) {
  body {
    padding: 20px;
  }
}

  </style>
</head>
<body>
  <div class="container"><h1>Booking Summary</h1>
<p>A driver will be in touch shortly.</p>
<hr>

<p><b>Name for Booking:</b> <span id="customerName"></span></p>
<p><b>Phone Number:</b> <span id="phoneNumber"></span></p>
<p><b>Area:</b> <span id="area"></span></p>
<p><b>Pickup Address:</b> <span id="pickup"></span></p>
<p><b>Extra Info:</b> <span id="extra"></span></p>
<p><b>Drop-off Location:</b> <span id="dropoff"></span></p>
<p><b>Passengers:</b> <span id="passengers"></span></p>
<p><b>Luggage:</b> <span id="luggage"></span></p>
<p><b>Travelling with Pet:</b> <span id="noPets"></span></p>
<p><b>Pickup Time:</b> <span id="pickupTime"></span></p>

<button class="submit-btn" onclick="submitBooking()">Submit Booking</button>
<button onclick="window.location.href='index.html'">Back to Home</button>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyA9EdglxWetAv81qe1GnwlMf7HbPccjXxQ",
    authDomain: "tourthelakes-1e165.firebaseapp.com",
    databaseURL: "https://tourthelakes-1e165-default-rtdb.firebaseio.com",
    projectId: "tourthelakes-1e165",
    storageBucket: "tourthelakes-1e165.appspot.com",
    messagingSenderId: "470758171431",
    appId: "1:470758171431:web:f06dd39b0f15b63b2bff02"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function showBooking() {
    document.getElementById('customerName').textContent = localStorage.getItem('customerName') || 'N/A';
    document.getElementById('phoneNumber').textContent = localStorage.getItem('phoneNumber') || 'N/A';
    document.getElementById('area').textContent = localStorage.getItem('area') || 'N/A';
    document.getElementById('pickup').textContent = localStorage.getItem('pickup') || 'N/A';
    document.getElementById('extra').textContent = localStorage.getItem('extra') || 'N/A';
    document.getElementById('dropoff').textContent = localStorage.getItem('dropoff') || 'N/A';
    document.getElementById('passengers').textContent = localStorage.getItem('passengers') || 'N/A';
    document.getElementById('luggage').textContent = localStorage.getItem('luggage') || 'N/A';

    var pet = localStorage.getItem('noPets');
    document.getElementById('noPets').textContent = (pet === 'true') ? 'No' : 'Yes or not confirmed';

    var pickupType = localStorage.getItem('pickupType');
    var pickupDate = localStorage.getItem('pickupDate');
    var pickupTime = localStorage.getItem('pickupTime');

    if (pickupType === 'ASAP') {
      document.getElementById('pickupTime').textContent = 'ASAP (avg wait ~15 min)';
    } else if (pickupType === 'Scheduled') {
      document.getElementById('pickupTime').textContent = pickupDate + ' at ' + pickupTime;
    } else {
      document.getElementById('pickupTime').textContent = 'Not specified';
    }
  }

  function submitBooking() {
    const booking = {
      name: localStorage.getItem('customerName'),
      phone: localStorage.getItem('phoneNumber'),
      area: localStorage.getItem('area'),
      pickup: localStorage.getItem('pickup'),
      extra: localStorage.getItem('extra'),
      dropoff: localStorage.getItem('dropoff'),
      passengers: localStorage.getItem('passengers'),
      luggage: localStorage.getItem('luggage'),
      pets: localStorage.getItem('noPets') === 'true' ? 'No' : 'Yes or not confirmed',
      time:
        localStorage.getItem('pickupType') === 'ASAP'
          ? 'ASAP (avg wait ~15 min)'
          : localStorage.getItem('pickupDate') + ' at ' + localStorage.getItem('pickupTime')
    };

    db.ref('bookings').push(booking).then(() => {
      window.location.href = "BookingSubmitted.html";
    });
  }

  window.onload = showBooking;
</script>

  </div>
</body>
</html>
